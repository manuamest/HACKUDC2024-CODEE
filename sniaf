def generate_report(metrics):
    # Filtrar los valores que son 0 o 'n/a'
    filtered_metrics = []
    for metric in metrics:
        filtered_metric = {k: v for k, v in metric.items() if v != 0 and v != 'n/a'}
        filtered_metrics.append(filtered_metric)

    num_plots = len(filtered_metrics)

    # Crear una sola figura para todos los gráficos
    fig, axs = plt.subplots(nrows=1, ncols=num_plots, figsize=(8*num_plots, 8))

    targets = [metric['target'] for metric in filtered_metrics]
    checks = [{k: v for k, v in metric.items() if k != 'target'} for metric in filtered_metrics]

    # Gráfico circular para cada archivo
    for i, (target, check) in enumerate(zip(targets, checks), start=0):
        axs[i].pie(check.values(), labels=check.keys(), autopct='%1.1f%%', startangle=140)
        axs[i].set_title(f'Checks para {target}')
        axs[i].axis('equal')

    # Guardar la imagen que contiene todos los gráficos
    plt.savefig('all_checks_pie.png')
    plt.show()